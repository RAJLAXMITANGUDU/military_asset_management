(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{859:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var l=t(9360);let s=e=>l.A.get(e).then(e=>e.data)},1029:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>d,ri:()=>n,WG:()=>r});let l=()=>{localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("baseId")},s=(0,t(1990).Z0)({name:"auth",initialState:{token:null,role:null,baseId:null},reducers:{setToken(e,a){e.token=a.payload.token,e.role=a.payload.role,e.baseId=a.payload.baseId},logout(e){e.token=null,e.role=null,e.baseId=null,l()}}}),{setToken:r,logout:n}=s.actions,d=s.reducer},2343:(e,a,t)=>{Promise.resolve().then(t.bind(t,4073))},3127:(e,a,t)=>{"use strict";t.d(a,{A:()=>d});var l=t(1990),s=t(1029);let r={};{let e=localStorage.getItem("token");r={auth:{token:e,role:localStorage.getItem("role"),baseId:localStorage.getItem("baseId")}}}let n=(0,l.U1)({reducer:{auth:s.Ay},preloadedState:r});n.subscribe(()=>{let{token:e,role:a,baseId:t}=n.getState().auth;localStorage.setItem("token",e||""),localStorage.setItem("role",a||""),localStorage.setItem("baseId",t||"")});let d=n},4073:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var l=t(5155),s=t(2115),r=t(4953),n=t(7948),d=t(859);function o(){let[e,a]=(0,s.useState)(""),[t,o]=(0,s.useState)(""),[i,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(1),{data:h}=(0,r.Ay)("/api/transfers",d.A),{data:p}=(0,r.Ay)("/api/bases",d.A),{data:x}=(0,r.Ay)("/api/equipment-types",d.A),b=async l=>{l.preventDefault();try{await (0,d.A)("/api/transfers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fromBase:e,toBase:t,equipmentTypeId:i,quantity:u})}),(0,n.j)("/api/transfers"),a(""),o(""),c(""),m(1)}catch(e){console.error("Transfer failed",e)}};return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h1",{className:"text-2xl mb-4",children:"Transfers"}),(0,l.jsx)("form",{onSubmit:b,className:"mb-6 p-4 bg-white shadow rounded",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"From Base"}),(0,l.jsxs)("select",{value:e,onChange:e=>a(e.target.value),className:"w-full border p-2 rounded",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select Base"}),null==p?void 0:p.map(e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"To Base"}),(0,l.jsxs)("select",{value:t,onChange:e=>o(e.target.value),className:"w-full border p-2 rounded",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select Base"}),null==p?void 0:p.map(e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Quantity"}),(0,l.jsx)("input",{type:"number",min:"1",value:u,onChange:e=>m(e.target.value),className:"w-full border p-2 rounded",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Equipment"}),(0,l.jsxs)("select",{value:i,onChange:e=>c(e.target.value),className:"w-full border p-2 rounded",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select Equipment"}),null==x?void 0:x.map(e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,l.jsx)("div",{className:"md:col-span-4 flex items-end",children:(0,l.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white p-2 rounded",children:"Transfer Assets"})})]})}),(0,l.jsx)("div",{className:"bg-white shadow rounded overflow-hidden",children:(0,l.jsxs)("table",{className:"min-w-full",children:[(0,l.jsx)("thead",{className:"bg-gray-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-3 text-left",children:"Date"}),(0,l.jsx)("th",{className:"p-3 text-left",children:"From Base"}),(0,l.jsx)("th",{className:"p-3 text-left",children:"To Base"}),(0,l.jsx)("th",{className:"p-3 text-left",children:"Equipment"}),(0,l.jsx)("th",{className:"p-3 text-left",children:"Quantity"})]})}),(0,l.jsx)("tbody",{children:null==h?void 0:h.map(e=>{var a,t,s;return(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"p-3",children:new Date(e.createdAt).toLocaleDateString()}),(0,l.jsx)("td",{className:"p-3",children:(null==(a=e.baseFrom)?void 0:a.name)||e.baseFrom}),(0,l.jsx)("td",{className:"p-3",children:(null==(t=e.baseTo)?void 0:t.name)||e.baseTo}),(0,l.jsx)("td",{className:"p-3",children:(null==(s=e.equipmentType)?void 0:s.name)||e.equipmentType}),(0,l.jsx)("td",{className:"p-3",children:e.quantity})]},e._id)})})]})})]})}function i(){return(0,l.jsx)(o,{})}},9360:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var l=t(3464),s=t(3127);let r=l.A.create({baseURL:"http://localhost:3000/api"});r.interceptors.request.use(e=>{let a=s.A.getState().auth.token;return a&&(e.headers.Authorization="Bearer ".concat(a)),e});let n=r}},e=>{var a=a=>e(e.s=a);e.O(0,[990,464,953,441,684,358],()=>a(2343)),_N_E=e.O()}]);