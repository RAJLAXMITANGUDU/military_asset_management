(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{859:(e,s,l)=>{"use strict";l.d(s,{A:()=>t});var a=l(9360);let t=e=>a.A.get(e).then(e=>e.data)},1029:(e,s,l)=>{"use strict";l.d(s,{Ay:()=>r,ri:()=>n,WG:()=>d});let a=()=>{localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("baseId")},t=(0,l(1990).Z0)({name:"auth",initialState:{token:null,role:null,baseId:null},reducers:{setToken(e,s){e.token=s.payload.token,e.role=s.payload.role,e.baseId=s.payload.baseId},logout(e){e.token=null,e.role=null,e.baseId=null,a()}}}),{setToken:d,logout:n}=t.actions,r=t.reducer},1604:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>c});var a=l(5155),t=l(2115),d=l(3319),n=l(4953),r=l(859);function i(){let[e,s]=(0,t.useState)(new Date),[l,i]=(0,t.useState)(""),[c,o]=(0,t.useState)(""),[h,m]=(0,t.useState)(!1),{data:u}=(0,n.Ay)("/api/bases",r.A),{data:x}=(0,n.Ay)("/api/equipment-types",r.A),{data:p,error:j}=(0,n.Ay)("/api/dashboard",r.A);return j?(console.log("inside dashboard"),console.log(j),(0,a.jsx)("div",{children:"Error loading dashboard"})):p?(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h1",{className:"text-2xl mb-4",children:"Dashboard"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date"}),(0,a.jsx)("input",{type:"date",value:(0,d.GP)(e,"yyyy-MM-dd"),onChange:e=>s(new Date(e.target.value)),className:"w-full border p-2 rounded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Base"}),(0,a.jsxs)("select",{value:l,onChange:e=>i(e.target.value),className:"w-full border p-2 rounded",children:[(0,a.jsx)("option",{value:"",children:"All Bases"}),null==u?void 0:u.map(e=>(0,a.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Equipment Type"}),(0,a.jsxs)("select",{value:c,onChange:e=>o(e.target.value),className:"w-full border p-2 rounded",children:[(0,a.jsx)("option",{value:"",children:"All Equipment"}),null==x?void 0:x.map(e=>(0,a.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 shadow rounded",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Opening Balance"}),(0,a.jsx)("p",{className:"text-2xl",children:p.opening})]}),(0,a.jsxs)("div",{className:"bg-white p-4 shadow rounded",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Purchased"}),(0,a.jsx)("p",{className:"text-2xl",children:p.purchased})]}),(0,a.jsxs)("div",{className:"bg-white p-4 shadow rounded cursor-pointer",onClick:()=>m(!0),children:[(0,a.jsx)("h3",{className:"font-medium",children:"Net Movement"}),(0,a.jsx)("p",{className:"text-2xl",children:p.net})]}),(0,a.jsxs)("div",{className:"bg-white p-4 shadow rounded",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Assigned"}),(0,a.jsx)("p",{className:"text-2xl",children:p.assigned})]}),(0,a.jsxs)("div",{className:"bg-white p-4 shadow rounded",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Closing Balance"}),(0,a.jsx)("p",{className:"text-2xl",children:p.closing})]})]}),h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg max-w-md w-full",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Net Movement Details"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Purchases:"}),(0,a.jsx)("span",{children:p.purchased})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Transfers In:"}),(0,a.jsx)("span",{children:p.transferIn})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Transfers Out:"}),(0,a.jsx)("span",{children:p.transferOut})]}),(0,a.jsxs)("div",{className:"flex justify-between font-bold border-t pt-2 mt-2",children:[(0,a.jsx)("span",{children:"Net Movement:"}),(0,a.jsx)("span",{children:p.net})]})]}),(0,a.jsx)("button",{onClick:()=>m(!1),className:"mt-4 w-full bg-blue-600 text-white py-2 rounded",children:"Close"})]})})]}):(0,a.jsx)("div",{children:"Loading..."})}function c(){return(0,a.jsx)(i,{})}},3127:(e,s,l)=>{"use strict";l.d(s,{A:()=>r});var a=l(1990),t=l(1029);let d={};{let e=localStorage.getItem("token");d={auth:{token:e,role:localStorage.getItem("role"),baseId:localStorage.getItem("baseId")}}}let n=(0,a.U1)({reducer:{auth:t.Ay},preloadedState:d});n.subscribe(()=>{let{token:e,role:s,baseId:l}=n.getState().auth;localStorage.setItem("token",e||""),localStorage.setItem("role",s||""),localStorage.setItem("baseId",l||"")});let r=n},7219:(e,s,l)=>{Promise.resolve().then(l.bind(l,1604))},9360:(e,s,l)=>{"use strict";l.d(s,{A:()=>n});var a=l(3464),t=l(3127);let d=a.A.create({baseURL:"http://localhost:3000/api"});d.interceptors.request.use(e=>{let s=t.A.getState().auth.token;return s&&(e.headers.Authorization="Bearer ".concat(s)),e});let n=d}},e=>{var s=s=>e(e.s=s);e.O(0,[990,464,953,319,441,684,358],()=>s(7219)),_N_E=e.O()}]);